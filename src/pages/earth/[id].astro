---
import Frontmatter from "@/components/Frontmatter.astro";
import Layout from "../../components/Layout.astro";

import type { CollectionEntry } from 'astro:content';
import { getCollection, render} from "astro:content";
import ParentLinks from "@/components/ParentLinks.astro";

interface Props {
	page: CollectionEntry<'earth'>;
}

export async function getStaticPaths() {

  const pages = await getCollection('earth');
  return pages.map( (page) => {
    return {
        params: { id: page.id },
        props: { page: {...page, data: {parent: page.data.parent, peer: page.data.peer, ...page.data}}}
  }
}
)
}

const { page } = Astro.props;
const { Content } = await render(page);

export const prerender = true;

// TODO check if preserves anchors??
---

<Layout pageTitle={page.data.title} pageStyle='docs' peerLinks={page.data.peer} starlightSettings={{next: false, prev: false}}>

   <Frontmatter data={page.data} />
    <ParentLinks data={page.data} ></ParentLinks>

    <Content />

</Layout>